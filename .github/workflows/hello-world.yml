# Nom du workflow (工作流的名称)
name: Hello World Workflow

# Quand on pousse du code ou on fait une pull request sur la branche "main"
# （当有人把代码 push 到 main 分支或发起 pull request 时触发）
on:
  push:
    branches:
      - main   # 指定触发的分支是 main
  pull_request:  # 当有人发起 Pull Request 时也触发
    branches:
      - main

jobs:  # Les tâches à exécuter (要执行的任务集合)
  greeting:  # Nom du job (任务的名字，可以随便取)
    runs-on: ubuntu-latest  # Système d’exploitation du runner (执行环境：Ubuntu 最新版)

    steps:  # Les étapes du job (任务中的每个步骤)

      # 0. très important : récupérer le code du dépôt
      # （非常重要：把仓库代码拉下来，不然没有 package.json）
      - name: Checkout repository
        uses: actions/checkout@v4

      # 1. installer Node.js
      # （安装 Node.js 环境，版本用 18）
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18  # 使用 Node.js 18 版本

      # Étape 3 : Afficher un message
      # （步骤3：打印 Hello World）
      - name: Afficher Hello World
        run: echo "Hello World"

      # Étape 4 : Installer les dépendances
      # 安装依赖，就会用到推上去的 package.json
      - name: Installer les dépendances
        run: npm install

      # Étape 5 : Vérifier le code avec ESLint
      # 运行代码检查
      - name: Vérifier le code
        run: npm run lint
